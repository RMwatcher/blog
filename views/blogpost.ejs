<%- include("partials/header.ejs") %>
    <div class="button-container">
        <% if (locals.postId) { %>
            <a href="/edit/<%= postId %>"><button class="edit-btn">Edit</button></a>
            <button class="delete-btn" onclick="deletePost('<%= postId %>')">Delete</button>
            <% }%>
    </div>

    <% if (locals.post) { %>
        <h1>
            <%= post.title %>
        </h1>
        <h2>
            <%= post.author %>
        </h2>
        <p>
            <%= post.content %>
        </p>
        <% } else { %>
            <h1>No Post to show</h1>
            <% } %>

                <a href="/"><button>Go Back</button></a>

                <script>
                    function deletePost(postId) {
                        if (confirm('Are you sure you want to delete this post?')) {
                            fetch(`/blogpost/${postId}`, {
                                method: 'DELETE',
                                headers: { 'Content-Type': 'application/json' }
                            })
                                .then(res => res.json())
                                .then(data => {
                                    alert('Post deleted successfully!');
                                    window.location.href = '/';
                                })
                                .catch(err => alert('Error deleting post: ' + err));
                        }
                    }
                </script>

                <%- include("partials/footer.ejs") %>